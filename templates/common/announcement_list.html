<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Student - ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* ‡∏à‡∏±‡∏î Layout ‡πÉ‡∏´‡πâ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏ã‡πâ‡∏≤‡∏¢ ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏ß‡∏≤ (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÉ‡∏´‡∏ç‡πà) */
        @media (min-width: 768px) {
            .news-layout {
                display: grid;
                grid-template-columns: 2fr 1fr; /* ‡∏Ç‡πà‡∏≤‡∏ß 2 ‡∏™‡πà‡∏ß‡∏ô : ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ 1 ‡∏™‡πà‡∏ß‡∏ô */
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="d-flex">
        <nav class="sidebar">
            <h2>Student Portal</h2>
            <a href="student_dashboard.html">üìä ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤</a>
            <a href="student_news.html" class="active">üì¢ ‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</a>
            <a href="student_training.html">üìö ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡∏ö‡∏£‡∏°</a>
            <a href="student_job.html">üè¢ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏á‡∏≤‡∏ô‡∏™‡∏´‡∏Å‡∏¥‡∏à</a>
            <a href="student_report.html">üìù ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</a>
            <a href="index.html" style="margin-top: auto; background:#c0392b;">üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
        </nav>

        <main class="main-content">
            <div class="header-bar">
                <h2>‡∏Ç‡πà‡∏≤‡∏ß‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (FR-06, FR-11)</h2>
            </div>
            
            <div class="news-layout">
                
                <div>
                    <h3 style="margin-top:0; color:var(--primary-color);">üì¢ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h3>
                    <div id="news-container">
                        </div>
                </div>

                <div>
                    <div class="card" style="position: sticky; top: 20px;">
                        <h3 style="margin-top:0; border-bottom: 2px solid var(--accent-color); padding-bottom:10px; color:var(--primary-color);">
                            üìÇ ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î
                        </h3>
                        <ul id="doc-list" class="doc-list">
                            </ul>
                    </div>
                </div>

            </div>
        </main>
    </div>

    <script src="js/data.js"></script>
    <script src="js/logic.js"></script>
    <script>
        // 1. Render News (FR-06)
        const newsContainer = document.getElementById('news-container');
        
        // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ç‡πà‡∏≤‡∏ß‡πÉ‡∏´‡∏°‡πà‡∏™‡∏∏‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô
        const sortedNews = db.announcements.sort((a,b) => new Date(b.date) - new Date(a.date));

        if (sortedNews.length === 0) {
            newsContainer.innerHTML = '<div class="card"><p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®</p></div>';
        } else {
            sortedNews.forEach(n => {
                const html = `
                    <div class="card" style="margin-bottom: 15px;">
                        <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                            <strong style="font-size:1.1rem; color:var(--text-color);">${n.title}</strong>
                            <small style="color:#888;">üìÖ ${n.date}</small>
                        </div>
                        <p style="color:#555; line-height:1.6;">${n.content}</p>
                    </div>
                `;
                newsContainer.innerHTML += html;
            });
        }

        // 2. Render Documents (FR-11) - ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
        const docContainer = document.getElementById('doc-list');
        
        // ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ô data.js ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ documents ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏ß‡πà‡∏≤‡∏á‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Error
        const docs = (typeof documents !== 'undefined') ? documents : [];

        if (docs.length === 0) {
            docContainer.innerHTML = '<li style="padding:15px; text-align:center; color:#999;">‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</li>';
        } else {
            docs.forEach(d => {
                // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÑ‡∏ü‡∏•‡πå
                let icon = 'üìÑ';
                if(d.name.endsWith('.pdf')) icon = 'üìï';
                if(d.name.endsWith('.docx') || d.name.endsWith('.doc')) icon = 'üìò';
                if(d.name.endsWith('.jpg') || d.name.endsWith('.png')) icon = 'üñºÔ∏è';

                const html = `
                    <li class="doc-item">
                        <div class="doc-info">
                            <span class="doc-icon">${icon}</span>
                            <div>
                                <div style="font-weight:bold; font-size:0.95rem;">${d.name}</div>
                                <div style="font-size:0.8rem; color:#888;">${d.date} ‚Ä¢ ${d.size}</div>
                            </div>
                        </div>
                        <a href="#" onclick="alert('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå: ${d.name}')" class="btn btn-secondary" style="padding:5px 10px; font-size:0.8rem;">
                            ‚¨áÔ∏è
                        </a>
                    </li>
                `;
                docContainer.innerHTML += html;
            });
        }
    </script>
</body>
</html>