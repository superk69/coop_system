<div id="register_modal" class="modal modal-open z-50 font-sans">
    
    <div class="modal-box relative shadow-2xl border-t-4 border-secondary w-11/12 max-w-md bg-base-100">
        <button type="button" onclick="closeRegisterModal()" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
        
        <div class="text-center mb-6">
            <h3 class="font-bold text-2xl text-secondary">ลงทะเบียนนักศึกษา</h3>
            <p class="text-gray-500 text-sm mt-1">กรอกข้อมูลเพื่อสร้างบัญชีผู้ใช้งานใหม่</p>
        </div>

        <form method="post" action="{% url 'register' %}" class="space-y-4">
            {% csrf_token %}

            {% for field in form %}
                <div class="form-control w-full">
                    <label class="label">
                        <span class="label-text font-bold">{{ field.label }}</span>
                        {% if field.field.required %}
                            <span class="text-error">*</span>
                        {% endif %}
                    </label>
                    
                    <div class="join w-full">
                        {{ field }}
                    </div>
                    
                    {% if field.help_text %}
                        <label class="label py-0 mt-1">
                            <span class="label-text-alt text-gray-400 text-xs">{{ field.help_text }}</span>
                        </label>
                    {% endif %}

                    {% if field.errors %}
                        <label class="label py-0 mt-1">
                            <span class="label-text-alt text-error">{{ field.errors.0 }}</span>
                        </label>
                    {% endif %}
                </div>
            {% endfor %}

            <div class="mt-6 pt-2">
                <button type="submit" class="btn btn-secondary w-full text-white shadow-md text-lg">
                    ยืนยันการสมัคร
                </button>
            </div>
        </form>

        <div class="text-center mt-4 pt-4 border-t border-base-200">
             <span class="text-sm text-gray-500">มีบัญชีอยู่แล้ว?</span>
             <button onclick="closeRegisterModal()" class="link link-hover text-sm text-secondary font-bold ml-1">
                เข้าสู่ระบบ
            </button>
        </div>
    </div>

    <div class="modal-backdrop bg-black/50 fixed inset-0 -z-10" onclick="closeRegisterModal()"></div>
</div>

<script>
    function closeRegisterModal() {
        const container = document.getElementById('modal-container');
        if (container) container.innerHTML = '';
        
        const modal = document.getElementById('register_modal');
        if (modal) modal.remove();
    }
</script>